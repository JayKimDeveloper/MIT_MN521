#!/bin/bash
# access-sw4 수동 설정 스크립트
# Customer A - CustomerA_EventPool
# 생성일: 2025-09-24T01:12:48Z

echo "================================================"
echo "access-sw4 수동 설정 가이드"
echo "================================================"
echo ""
echo "⚠️  이 스크립트는 가이드용입니다. Access 스위치에 콘솔로 접속하여 수동 실행하세요."
echo ""
echo "1. access-sw4에 콘솔 접속"
echo ""
echo "2. 업링크 포트 트런크 설정 (중요!):"
echo "Switch> enable"
echo "Switch# configure terminal"
echo ""
echo "# 업링크 포트를 트런크로 설정 (dist2-sw 연결 포트)"
echo "Switch(config)# interface GigabitEthernet0/0"
echo "Switch(config-if)# switchport trunk encapsulation dot1q"
echo "Switch(config-if)# switchport mode trunk"
echo "Switch(config-if)# switchport trunk allowed vlan 105"
echo "Switch(config-if)# no shutdown"
echo "Switch(config-if)# exit"
echo ""
echo "3. VLAN 생성:"
echo "Switch(config)# vlan 105"
echo "Switch(config-vlan)# name A_CustomerA_EventPool"
echo "Switch(config-vlan)# exit"
echo ""
echo "4. 고객 포트를 VLAN에 할당:"
echo "Switch(config)# interface range GigabitEthernet0/1-2"
echo "Switch(config-if-range)# switchport mode access"
echo "Switch(config-if-range)# switchport access vlan 105"
echo "Switch(config-if-range)# no shutdown"
echo "Switch(config-if-range)# exit"
echo ""
echo "5. Spanning Tree 최적화 (선택적):"
echo "Switch(config)# interface GigabitEthernet0/0"
echo "Switch(config-if)# spanning-tree portfast trunk"
echo "Switch(config-if)# exit"
echo ""
echo "6. 설정 저장:"
echo "Switch(config)# exit"
echo "Switch# write memory"
echo ""
echo "7. 설정 확인:"
echo "Switch# show interface trunk"
echo "Switch# show vlan brief"
echo "Switch# show spanning-tree vlan 105"
echo ""
echo "================================================"
echo "문제해결 가이드:"
echo "================================================"
echo "- ping이 안 되면: Spanning Tree가 수렴할 때까지 대기 (30초~1분)"
echo "- 트래픽 확인: show interface trunk"
echo "- MAC 학습 확인: show mac address-table vlan 105"
echo "================================================"
